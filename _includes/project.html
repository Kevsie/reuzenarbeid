{% assign path = '/projects/' | append: project_id %}
{% assign project = site.projects | where:'id', path | first %}
<li class="project">
  <script type="text/javascript">
    projectTitles['{{ project_id }}'] = {{ project.title | jsonify }}
  </script>
  <div>
    <div class="page trigger-project trigger-geojson" data-project-id="{{ project_id }}">
      <div class="sticky">
        <div class="title-container">
          <h2>
            <a name="{{ project_id }}" id="{{ project_id }}" class="pointer-events">
              {{ project.title }}
            </a>
          </h2>
        </div>
      </div>
    </div>
  </div>
  <section class="box">
    <div class="box-contents">
    {{ project.output }}
    </div>
    <div class="page-controls">
      <a href="#"><span>⟵ </span><span class="link">Back to top</span></a>
      <a href="#table-of-contents"><span class="link">Table of contents</span><span> ⟶</span></a>
    </div>
  </section>
  <div class="page trigger-mapwarper" data-project-id="{{ project_id }}" data-map-id="{{ project.map.id }}">
    <div class="box sticky">
      <div class="box-contents">
        <p>
          Map: <a href="http://digitalcollections.nypl.org/items/{{ project.map.uuid }}"><i>{{ project.map.title }} ({{ project.map.year }})</i></a>, opacity: <input class="opacity-slider" type="range" value="100" min="0" max="100">
        </p>
      </div>
    </div>
  </div>
  <div class="page"></div>
</li>